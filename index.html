<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>X-Wallet — RiskXLabs (v1.5)</title>
  <meta name="theme-color" content="#071016" />
  <!-- Adjust this path if your css is elsewhere, e.g. xwallet1_5/css/styles.css -->
  <link rel="stylesheet" href="css/styles.css" />
  <link rel="icon" href="assets/favicon.png" />
</head>

<body>
  <!-- ===== Header (unchanged layout style) ===== -->
  <header class="rl-header">
    <div class="brand">
      <img src="assets/riskxlabs-shieldflask.png" class="brand-logo" alt="RiskXLabs" />
      <h1 class="brand-title">Risk<span class="x-accent">X</span>Labs</h1>
    </div>

    <nav class="rl-nav">
      <a class="nav-link active" href="index.html">Home</a>
      <a class="nav-link" href="dashboard.html">Dashboard</a>
      <a class="nav-link" href="safesend.html">SafeSend</a>
      <span class="nav-divider" aria-hidden="true"></span>
      <a class="nav-link" href="examiner.html">Examiner / Eagle Eye</a>
      <a class="nav-link" href="wallet.html">X-Wallet</a>
      <a class="nav-link" href="settings.html">Settings</a>
    </nav>
  </header>

  <!-- ===== Main container (kept same spacing as 1.4) ===== -->
  <main class="container">
    <!-- Top hero/panel area (unchanged structure) -->
    <section class="panel hero">
      <div class="hero-copy">
        <h2 class="hero-title">X-Wallet <span class="pill pill-good">v1.5</span></h2>
        <p class="hero-subtitle">
          Non-custodial. Multi-chain. Built to <strong>block fraud</strong> before it happens.
        </p>
        <ul class="hero-points">
          <li>Multi-chain selection (Ethereum, Base, Polygon, Sepolia, etc.)</li>
          <li>Risk model adds: OFAC hard-block, Scam clusters ≥60, Phishing clusters</li>
          <li>Seamless hand-off to <code>app.js</code>/<code>worker.js</code> via <code>localStorage</code></li>
        </ul>
      </div>

      <div class="hero-cta">
        <!-- Keep the same ID your v1.4 used so any existing JS continues to work -->
        <button id="enterBtn" class="btn btn-primary" data-role="enter-wallet">Enter X-Wallet</button>
        <p class="cta-hint">Your selected networks are saved for the app & worker.</p>
      </div>
    </section>

    <!-- ===== v1.5 add-on: Multi-Chain Selector (namespaced; won’t move layout) ===== -->
    <section class="panel v15-card">
      <h3 class="section-title">Networks</h3>

      <!-- Quick-pick pills (toggle on/off) -->
      <div class="v15-net-pills" id="v15NetPills" role="group" aria-label="Network select">
        <button class="v15-pill v15-pill-select v15-on" data-id="ethereum" aria-pressed="true">Ethereum</button>
        <button class="v15-pill v15-pill-select v15-on" data-id="base" aria-pressed="true">Base</button>
        <button class="v15-pill v15-pill-select v15-on" data-id="polygon" aria-pressed="true">Polygon</button>
        <button class="v15-pill v15-pill-select v15-on" data-id="sepolia" aria-pressed="true">Sepolia</button>
        <button class="v15-pill v15-pill-select" data-id="arbitrum" aria-pressed="false">Arbitrum</button>
        <button class="v15-pill v15-pill-select" data-id="optimism" aria-pressed="false">Optimism</button>
      </div>

      <div class="v15-net-bulk">
        <button id="v15SelectAll" class="v15-btn v15-btn-ghost">Select All</button>
        <button id="v15SelectNone" class="v15-btn v15-btn-ghost">Clear</button>
      </div>

      <!-- Compact fallback multi-select (doesn’t change surrounding layout) -->
      <label class="v15-select-label" for="v15NetworkSelect">Or choose from list</label>
      <select class="v15-network-select" id="v15NetworkSelect" multiple size="6" aria-describedby="v15NetHelp">
        <option value="ethereum" selected>Ethereum</option>
        <option value="base" selected>Base</option>
        <option value="polygon" selected>Polygon</option>
        <option value="sepolia" selected>Sepolia</option>
        <option value="arbitrum">Arbitrum</option>
        <option value="optimism">Optimism</option>
      </select>
      <p id="v15NetHelp" class="v15-muted">Tip: hold Ctrl/Cmd to select multiple.</p>
    </section>

    <!-- ===== v1.5 add-on: Risk bullets (informational, no layout dependence) ===== -->
    <section class="panel v15-card">
      <h3 class="section-title">Risk Assessment (active in 1.5)</h3>
      <div class="v15-risk-grid">
        <div class="v15-risk-item">
          <span class="v15-risk-dot dot-hard"></span>
          <div>
            <div class="v15-risk-name">OFAC Sanctions</div>
            <div class="v15-risk-note">Hard-block — transfers to listed addresses are prevented.</div>
          </div>
        </div>
        <div class="v15-risk-item">
          <span class="v15-risk-dot dot-high"></span>
          <div>
            <div class="v15-risk-name">Scam Clusters</div>
            <div class="v15-risk-note">Presence sets ≥ <strong>60</strong> for that factor alone.</div>
          </div>
        </div>
        <div class="v15-risk-item">
          <span class="v15-risk-dot dot-med"></span>
          <div>
            <div class="v15-risk-name">Phishing Clusters</div>
            <div class="v15-risk-note">Known phishing campaigns & look-alike routes.</div>
          </div>
        </div>
        <div class="v15-risk-item">
          <span class="v15-risk-dot dot-info"></span>
          <div>
            <div class="v15-risk-name">Heuristics</div>
            <div class="v15-risk-note">Fan-in/out, mixers, age of address, risk halos, etc.</div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- ===== Footer (unchanged layout style) ===== -->
  <footer class="rl-footer">
    <span>© <span id="year"></span> RiskXLabs</span>
    <span class="v15-version" aria-label="version">X-Wallet v1.5</span>
  </footer>

  <!-- ===== v1.5 bootstrap (namespaced; doesn’t change your 1.4 routing) ===== -->
  <script>
    (function () {
      const VERSION = "1.5.0";
      const STORAGE_KEY = "xw.selectedNetworks";
      const SUPPORTED = ["ethereum","base","polygon","sepolia","arbitrum","optimism"];

      const q = s => document.querySelector(s);
      const qa = s => Array.from(document.querySelectorAll(s));

      const pills   = qa(".v15-pill-select");
      const select  = q("#v15NetworkSelect");
      const btnAll  = q("#v15SelectAll");
      const btnNone = q("#v15SelectNone");
      const yearEl  = q("#year");
      if (yearEl) yearEl.textContent = new Date().getFullYear();

      // Keep version for diagnostics
      localStorage.setItem("xw.version", VERSION);

      function currentFromPills() {
        return pills
          .filter(p => p.classList.contains("v15-on"))
          .map(p => p.dataset.id)
          .filter(id => SUPPORTED.includes(id));
      }
      function syncSelectFromPills() {
        const chosen = new Set(currentFromPills());
        Array.from(select.options).forEach(o => { o.selected = chosen.has(o.value); });
      }

      pills.forEach(p => {
        p.addEventListener("click", () => {
          p.classList.toggle("v15-on");
          p.setAttribute("aria-pressed", p.classList.contains("v15-on") ? "true" : "false");
          syncSelectFromPills();
          localStorage.setItem(STORAGE_KEY, JSON.stringify(currentFromPills()));
        });
      });
      if (btnAll) btnAll.addEventListener("click", () => {
        pills.forEach(p => p.classList.add("v15-on"));
        syncSelectFromPills();
        localStorage.setItem(STORAGE_KEY, JSON.stringify(currentFromPills()));
      });
      if (btnNone) btnNone.addEventListener("click", () => {
        pills.forEach(p => p.classList.remove("v15-on"));
        syncSelectFromPills();
        localStorage.setItem(STORAGE_KEY, JSON.stringify(currentFromPills()));
      });

      if (select) select.addEventListener("change", () => {
        const chosen = new Set(Array.from(select.selectedOptions).map(o => o.value));
        pills.forEach(p => {
          const on = chosen.has(p.dataset.id);
          p.classList.toggle("v15-on", on);
          p.setAttribute("aria-pressed", on ? "true" : "false");
        });
        localStorage.setItem(STORAGE_KEY, JSON.stringify(Array.from(chosen)));
      });

      // If your v1.4 already wires #enterBtn, we just ensure nets are saved before it runs
      const enter = document.getElementById("enterBtn") || document.querySelector('[data-role="enter-wallet"]');
      if (enter) {
        enter.addEventListener("click", () => {
          localStorage.setItem(STORAGE_KEY, JSON.stringify(currentFromPills()));
        }, { capture: true });
      }

      // Restore prior selection (if any)
      try {
        const prev = JSON.parse(localStorage.getItem(STORAGE_KEY) || "[]");
        if (prev.length) {
          pills.forEach(p => p.classList.toggle("v15-on", prev.includes(p.dataset.id)));
          syncSelectFromPills();
        }
      } catch (_) {}
    })();
  </script>

  <!-- Adjust this path if your bundle is elsewhere, e.g. xwallet1_5/app.js -->
  <script src="app.js" defer></script>
</body>
</html>